# subtitle-forge default configuration

whisper:
  # Whisper model name
  # Options: tiny, base, small, medium, large-v2, large-v3, distil-large-v3
  model: large-v3

  # Device: cuda or cpu
  device: cuda

  # Compute precision: float16, int8_float16, int8
  # float16: faster, requires more VRAM
  # int8_float16: balanced
  # int8: less VRAM, slightly slower
  compute_type: float16

  # Beam search size
  beam_size: 5

  # Voice Activity Detection filter
  vad_filter: true

  # Batch size (uses BatchedInferencePipeline)
  # Set to null for standard inference
  batch_size: null

ollama:
  # Ollama model name
  model: qwen2.5:14b

  # Ollama API address
  host: http://localhost:11434

  # Generation temperature (0-1, lower = more deterministic)
  temperature: 0.3

  # Subtitles per translation batch
  max_batch_size: 10

  # Maximum retry attempts
  max_retries: 3

output:
  # Output file encoding
  encoding: utf-8

  # Keep original language subtitles
  keep_original: true

  # Generate bilingual subtitles
  bilingual: false

  # Original text on top in bilingual mode
  original_on_top: true

# Maximum concurrent workers for batch processing
max_workers: 2

# Log level: DEBUG, INFO, WARNING, ERROR
log_level: INFO

# Log file path (null = no file logging)
log_file: null

# Timestamp post-processing settings
timestamp:
  # Enable timestamp post-processing
  enabled: true

  # Processing mode:
  #   "off"     - No processing, trust WhisperX output completely
  #   "minimal" - Only fix overlaps and ensure minimum duration (recommended)
  #   "full"    - Complete processing: split segments, extend times, fix all issues
  mode: "minimal"

  # Minimum subtitle duration in seconds
  min_duration: 0.5

  # Maximum subtitle duration in seconds
  max_duration: 8.0

  # Minimum gap between subtitles in seconds
  min_gap: 0.05

  # Gap threshold for "may indicate missed speech" warning (seconds)
  # Set higher to reduce warnings for videos with sparse dialogue
  max_gap_warning: 50.0

  # Reading speed for Western languages (chars per second)
  chars_per_second: 15.0

  # Reading speed for CJK languages (Chinese/Japanese/Korean)
  # CJK characters are denser, so use slower speed
  cjk_chars_per_second: 10.0

  # Minimum text length before attempting to split segments (full mode only)
  split_threshold: 30
